<!DOCTYPE html>
<html>    
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>bencode@编码</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yourdomain.com/">
  <link rel="alternate" type="application/atom+xml" title="bencode@编码" href="http://yourdomain.com/feed.xml" />
  <script src="/scripts/jquery-1.11.2.min.js"></script>
  <script src="/scripts/pithy.js"></script>
</head>


  <body>
    <header class="header">
	<div class="header-container">
		<div class="nav">
			
			<span class="title">
				<li>
					<a href="/index.html">home</a>
				</li>
			</span>			
			
			
				<li>
					<a href="/archive.html">archive</a>
				</li>			
			
			
				<li>
					<a href="/category.html">category</a>
				</li>			
			
			
				<li>
					<a href="/about.html">about</a>
				</li>			
			
		</div>
		<div class="description">  </div>		
		<ul class="social-links">
			<li>
				<a href="https://github.com/jekyll" title="Github">
					<img width="19px" height="19px" src="/images/github.png"/>
				</a>
			</li>
			<li>
				<a href="/feed.xml" title="RSS">
					<img width="19px" height="19px" src="/images/rss.png"/>
				</a>
			</li>
			<li>
				<a href="https://twitter.com" title="RSS">
					<img width="19px" height="19px" src="/images/twitter.png"/>
				</a>
			</li>
		</ul>		
	</div>
</header>

    <br>
    <div class="page-content">
      <div class="wrapper">
        <div class="home">
  <ul class="post-list">
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/nodejs/2015/06/25/io-default-feature.html">iojs中的默认es6特性</a>
        </h3>
        <span class="post-meta">Jun 25, 2015 00:06</span>
        <hr id="line">
		<div class="content">
		<h2 id="let-">let 块作用域</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2015/06/06/common-node-js-package.html">常用的nodejs package</a>
        </h3>
        <span class="post-meta">Jun 6, 2015 00:06</span>
        <hr id="line">
		<div class="content">
		<p>收集工具类nodejs package，避免造轮子</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/jekyll/update/2015/04/09/welcome-to-jekyll%20copy.html">Welcome to Jekyll!</a>
        </h3>
        <span class="post-meta">Apr 9, 2015 19:04</span>
        <hr id="line">
		<div class="content">
		<p>You’ll find this post in your <code>_posts</code> directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run <code>jekyll serve</code>, which launches a web server and auto-regenerates your site when a file is updated.</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/git/2015/03/01/faq.html">git常见问题</a>
        </h3>
        <span class="post-meta">Mar 1, 2015 00:03</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">文件大小写重命名</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/beauty-of-mathematics/2015/02/15/preface.html">《数学之美》读书笔记－序言和前言</a>
        </h3>
        <span class="post-meta">Feb 15, 2015 00:02</span>
        <hr id="line">
		<div class="content">
		<p>互联网创使人Tim Berners-Lee: 简单性和模块化是软件工程的基石，分布式和容错性是互联网的生命。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2015/01/08/about-version.html">关于nodejs中版本号</a>
        </h3>
        <span class="post-meta">Jan 8, 2015 00:01</span>
        <hr id="line">
		<div class="content">
		<p>我们开始尝试在正式环境使用node，所以对二方包和三方包的稳定性和一致性会有更高的要求。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/hackers/and/painters/2014/12/28/c2.html">《黑客与画家》读书笔记（第二章）</a>
        </h3>
        <span class="post-meta">Dec 28, 2014 00:12</span>
        <hr id="line">
		<div class="content">
		<p>黑客与画家的共同之处，在于他们都是创作者。他们的本质都不是在做研究。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/git/2014/12/23/best-practice.html">git最佳实践</a>
        </h3>
        <span class="post-meta">Dec 23, 2014 00:12</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">关于提交</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2014/12/20/hammer-prevent-default.html">Hammer.js默认情况下会preventDefault的解决</a>
        </h3>
        <span class="post-meta">Dec 20, 2014 00:12</span>
        <hr id="line">
		<div class="content">
		<p>默认情况下, hammer.js会preventDefault，这会阻止原生的滚动等行为。
这在大多数情况下没什么问题，但有些情况下我们需要这类行为时，由于它没有开放相应的参数，就比较麻烦。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/nginx/2014/12/01/error_page.html">nginx配置error_page</a>
        </h3>
        <span class="post-meta">Dec 1, 2014 00:12</span>
        <hr id="line">
		<div class="content">
		<p>官网文档：<a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#error_page">查看</a></p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2014/11/26/review.html">eclipse review</a>
        </h3>
        <span class="post-meta">Nov 26, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">一些名词</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/web/2014/11/25/iframe-autoresize.html">iframe自适应高度</a>
        </h3>
        <span class="post-meta">Nov 25, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<p>这两天项目中需要，上网搜了一把找到一大堆，最后使用下面的方案。
发现一个问题，就是onload时再触发有点太慢了，可以改用domready等事件，还好我这个自适应不在线上使用，只存在开发环境下的mock。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/nodejs/2014/11/11/exec-sync.html">child_process的同步方法execSync</a>
        </h3>
        <span class="post-meta">Nov 11, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<p>node中通过child_processt和shell交互很方便，只是0.10.x版本中的exec没有同步版本，让做“脚本”用途的node写起来很是麻烦。
而在0.11.12版本后添加了execSync方法解决了这个问题。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/reading/polymer/2014/11/08/template.html">Polymer学习笔记 - HTML5 Template</a>
        </h3>
        <span class="post-meta">Nov 8, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<p><a href="http://www.html5rocks.com/zh/tutorials/webcomponents/template/">参考资料</a></p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/reading/polymer/2014/11/08/shadow-dom.html">Polymer学习笔记 - Shadow DOM</a>
        </h3>
        <span class="post-meta">Nov 8, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">基本使用</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/reading/polymer/2014/11/08/helper-methods.html">Polymer学习笔记 - Helper Methods</a>
        </h3>
        <span class="post-meta">Nov 8, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<h2 id="html-imports">动态Html imports</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/reading/polymer/2014/11/07/data-binding.html">Polymer学习笔记 - Data Binding</a>
        </h3>
        <span class="post-meta">Nov 7, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<h2 id="overview">Overview</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/reading/polymer/2014/11/06/api-developer-guide.html">Polymer学习笔记 - API Developer Guide</a>
        </h3>
        <span class="post-meta">Nov 6, 2014 00:11</span>
        <hr id="line">
		<div class="content">
		<p><a href="https://www.polymer-project.org/docs/polymer/polymer.html">链接</a></p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/general/2014/04/08/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html">前端面试问题</a>
        </h3>
        <span class="post-meta">Apr 8, 2014 00:04</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">通用类</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/nginx/2013/09/04/nginx.html">Nginx学习记录</a>
        </h3>
        <span class="post-meta">Sep 4, 2013 00:09</span>
        <hr id="line">
		<div class="content">
		<p>a high performance HTTP and reverse proxy server, as well as a mail proxy server</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/life/2013/06/06/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C.html">青海湖骑行计划</a>
        </h3>
        <span class="post-meta">Jun 6, 2013 00:06</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">行程</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2012/12/26/aop-practice.html">AOP及其在Javascript中的应用</a>
        </h3>
        <span class="post-meta">Dec 26, 2012 00:12</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">两个例子</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2012/12/07/implement-a-validator.html">一个前端验证组件的实现</a>
        </h3>
        <span class="post-meta">Dec 7, 2012 00:12</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">背景</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2012/12/07/implement-a-parser.html">一个Parser的实现</a>
        </h3>
        <span class="post-meta">Dec 7, 2012 00:12</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">背景</h2>
<p>在我们的设计师平台，设计师可以在编辑器中输入 HTML, CSS 等代码， 而前端需要对其有效性进行验证，用正则表达式能很好地对词汇进行效验，却难以在语法层面上发挥作用，所以需要实现简单的Parser将HTML,CSS转换成相应的结构进行效验。</p>

<h2 id="section-1">原理</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2012/02/23/inside-jquery.html">Inside jQuery</a>
        </h3>
        <span class="post-meta">Feb 23, 2012 00:02</span>
        <hr id="line">
		<div class="content">
		<h3 id="jqueryfninit--99">jQuery.fn.init处理流程  [99]</h3>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/git/2012/01/17/git-study.html">git学习记录</a>
        </h3>
        <span class="post-meta">Jan 17, 2012 00:01</span>
        <hr id="line">
		<div class="content">
		<p>用git一段时间了，但是只掌握了其中一小部分内容，这两天把progit重新看一遍，这里就记一下关键的东西</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2011/08/29/js-study.html">学习Javascript</a>
        </h3>
        <span class="post-meta">Aug 29, 2011 00:08</span>
        <hr id="line">
		<div class="content">
		<p>本文目的在于为Java或有语言基础的同学参于前端开发提供指导</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2010/10/22/context-closure.html">Javascript执行环境和Closure</a>
        </h3>
        <span class="post-meta">Oct 22, 2010 00:10</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">1. 函数作用域</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/java/2010/03/16/hibernate-session.html">Hibernate学习笔记1–Session与对象</a>
        </h3>
        <span class="post-meta">Mar 16, 2010 00:03</span>
        <hr id="line">
		<div class="content">
		<h2 id="section">不同的对象状态</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2010/01/22/jquery-code-event.html">jQuery源码解析3(Event)</a>
        </h3>
        <span class="post-meta">Jan 22, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>这一篇，我们要看 jQuery Events 部分的源码。</p>

<p>这一次看的是1.4的源码，因为API接口没变，但功能增强，并且live支持了所有事件, 支持context等。</p>

<p>我们平常这样写：</p>

<p><code>js
$('#button').click(function() {  
    alert('you hurt me!');  
});  
</code></p>

<p>也可以这样写：</p>

<p><code>js
$('#button').bind('click', function() {  
    alert("don't touch me!");  
});  
</code></p>

<p>想到click的实现应该基于bind, 搜索一下bind, 来到这里：</p>

<p><code>js
jQuery.each(["bind", "one"], function( i, name ) {  
    jQuery.fn[ name ] = function( type, data, fn ) {  
        // Handle object literals  
</code></p>

<p>看来bind 和 one 有点关系呀！它们的签名都是这样：</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2010/01/21/jquery-code-core.html">jQuery源码解析2(Core)</a>
        </h3>
        <span class="post-meta">Jan 21, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>在上一篇中，我们介绍了jQuery Utilities部分的代码。 这一部分要看看Core部分的。</p>

<p>我们知道 $(‘#id’) 或 jQuery(‘#id’) 将会返回一个对象， 这个对象的构造函数是：jQuery.fn.init</p>

<p><code>js
jQuery = window.jQuery = window.$ = function( selector, context ) {  
    return new jQuery.fn.init( selector, context );  
},  
</code></p>

<p><code>js
jQuery.fn.init.prototype = jQuery.fn;  
</code></p>

<p>让我们先看看 jQuery.fn.init</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/javascript/2010/01/18/jquery-code-utility.html">jQuery源码解析1(Utilities)</a>
        </h3>
        <span class="post-meta">Jan 18, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>使用jquery两年多了,  我最早是使用的是prototype库，后来使用mootools， 直到后来弟弟推荐我使用jquery(他是个UI设计师)，就一直用到现在。 我是被它的简洁和精炼所吸引的。</p>

<p>我喜欢看源代码，以前开发eclipse rcp时，就喜欢看eclipse的源码，因为有时候API文档并不那么明了，eclipse优秀的架构配合JDT强大的功能，让我们很容易地看懂。 一个设计优秀的产品，它的代码应该也是易于理解的。 现在我做web用的是php的ci，在开发过程中也是时常查看它的源代码。</p>

<p>为了更好地使用jquery, 所以我阅读了jquery的源代码。不敢独享，所以写出来，相互讨论，一起进步。</p>

<p>我使用的是 1.3.2</p>

<p>我们从开始的地方开始 ：</p>

<p><code>js
(function() {  
 ...      
})();  
</code></p>

<p>所有代码包含在以上的函数中，避免名字冲突。</p>

<h2 id="section">1. 几个”全局变量”</h2>

<p>```js
var <br />
    window = this,<br />
    undefined, <br />
    _jQuery = window.jQuery, <br />
    _$ = window.$,  </p>

<pre><code>jQuery = window.jQuery = window.$ = function(selector, context) {  
    return new jQuery.fn.init(selector, context);  
},  
  
// A simple way to check for HTML strings or ID strings  
quickExpr = /^[^&lt;]*(&lt;(.|\s)+&gt;)[^&gt;]*$|^#([\w-]+)$/,  
// Is it a simple selector  
isSimple = /^.[^:#\[\.,]*$/;   ```
</code></pre>

<h3 id="section-1">1.1</h3>

<p>window 还是那个window, undefined 还是那个undefined，只是这样让js 解释器更快地找到他们，提高速度。</p>

<p><code>js
 _jQuery = window.jQuery
_$ = window.$,
</code></p>

<p>保存原来的 jQuery 和 $, 因为默认情况下jquery占用名字空间 jQuery 和$</p>

<p>搜索一下使用 _jQuery的地方吧：</p>

<p>```js
jQuery.extend({<br />
    noConflict: function( deep ) {<br />
        window.$ = _$;  </p>

<pre><code>    if ( deep )  
        window.jQuery = _jQuery;  
  
    return jQuery;  
},   ```
</code></pre>

<p>OK， 是为了 noConflict。</p>

<p>比如我们要同时使用prototype和jquery, 可以先让html页面包含 prototype.js 再包含 jquery.js。</p>

<p>然后调用  jq = jQuery.noConflict();   接着就可以用jq来使用jQuery框架， $ 就变回 prototype.js 中的方法了。</p>

<p>还有一个deep参数， 可以让另一个jQuery(可能不怎么有名， 但对你的项目有用) 和 现在的jQuery 共存。</p>

<p>quickExpr:  是一个正则表达式， 用于快速匹配一个 html tag 或 id 字符串（如 ‘#id’)
isSimple: 也是一个与此同时表达式, 用于匹配一个 selector (css 选择器)</p>

<h3 id="section-2">1.2</h3>

<p><code>js
jQuery = window.jQuery = window.$ = function(selector, context) {  
    return new jQuery.fn.init(selector, context);  
},  
</code></p>

<p>我们思考： jQuery.fn.init 是构造函数， 那它的实例方法应该由 : jQuery.fn.init.prototype 指定。</p>

<p>搜索它， 在541行得到以下代码：</p>

<p><code>js
jQuery.fn.init.prototype = jQuery.fn;  
</code></p>

<p>所以 我们平常使用 $(‘#abc’) 或 jQuery(‘#abc’) </p>

<p>$ 就是 jQuery，它返回一个对象。 这个对象的构造函数是 jQuery.fn.init(…</p>

<p>这个对象的实例方法和字段就是 jQuery.fn 的成员。</p>

<p><code>js
jQuery.fn = jQuery.prototype = {  
    init: function( selector, context ) {  
    ...  
    },  
    size: function() {  
        return this.length;  
    },  
        ...  
</code></p>

<p>从以上可以看出，下面的代码等效。</p>

<p><code>js
var a = $('#id'); // a = new jQuery('#id');
a.size();
</code></p>

<p>上面我们隐约看到了jQuery的插件结构， 你可以添加方法到 jQuery.fn，就可以在jQuery对象中使用。</p>

<p>但首先，我们先看几个通用工具方法，因为其他很多部分使用它们。</p>

<h2 id="section-3">2. 几个工具方法</h2>

<h3 id="jqueryextend--jqueryfnextend">2.1  jQuery.extend = jQuery.fn.extend</h3>

<p>我们分两部分看这个方法：首先是准备， 然后是拷贝。</p>

<p>准备：</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2010/01/14/hashtable.html">《算法导论》读书笔记7(散列表)</a>
        </h3>
        <span class="post-meta">Jan 14, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>《算法导论》第三部分 数据结构 略过栈 队列 链表，我们到了 散列表</p>

<p>散列表是最常用的数据结构之一，特别是 ruby js等动态语言在语法层次上对它进行了支持。只是在java中，有那么点点绕(每次使用的时候，心里会疙瘩一下，不知道你们有没有这种感觉)。</p>

<p>本章真是纠结，因为看得懂的以前都看过，不懂的现在还是看不懂。 还好看不懂的部分都是加星号的。</p>

<p>散列表是这样一个东西：它能以key为索引保存东西， 然后在需要的时候嗖的一下就能找出来，灰常地快：）</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2010/01/07/min-max.html">《算法导论》读书笔记6(中位数和顺序统计学)</a>
        </h3>
        <span class="post-meta">Jan 7, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>这一章《中位数和顺序统计学》很短，也是本书第二部分的最后一章</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2010/01/06/linersort.html">《算法导论》读书笔记5(线性时间排序)</a>
        </h3>
        <span class="post-meta">Jan 6, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>算法导论的第八章是：线性时间排序</p>

<p>我们共分析过四个排序算法：插入排序，归并排序，堆排序以及快递排序，它们有一个共同点，就是都是基于比较的，都属于比较排序算法</p>

<p>通过决策树模型，可以知道比较排序算法的最坏情况下的下界是：nlog(n)</p>

<p>上面的话有点拗口，下面进行简单的分析</p>

<p>决策树，是一棵满二叉树，排序的过程就像从根走到叶的过程, 因为不是小于等于就是大于嘛，所以不是向左走，就是向右走，直到走到叶节点，排序完成。 那么比较的次数，在最坏的情况下，不会多于树的高度。</p>

<p>n的元素的排序，共有 n! 种 情况， 它们都会出现在决策树的叶子节点上
高度为 h 的二叉对， 叶子数目不会多于 2^h 个</p>

<p>因此 n! &lt;= 2^h   —-&gt; h &gt; lg(n!)   后者 相当于 nlg(n)    </p>

<p>也就是说不管怎么样的决策树，它的高度不会小于 nlg(n)</p>

<p>而一个排序算法，就对应于一棵决策树, 因此在最坏的情况下，它的比较次数 h , 而不管算法设计多么棒 h &gt;= lg(n!)</p>

<p>所以堆排序和合并排序都是渐近最优的。</p>

<p>快速排序在平均情况下，也是渐近最优的。</p>

<p>排序也可以不基于比较，因此就没有上述限制</p>

<p>计数排序</p>

<p>读了这一节，让我想到了《编程珠玑》（不是《编程珠玑2》) 中的一个问题， 大概是这样：</p>

<p>系统要对一个文件中的记录进行排序，排序后，输出到另一个文件 。 文件的每个记录都是一个小于7位的数字（背景是美国的电话号码）, 记录不重复，记录数目非常多，大概也是近千万。</p>

<p>上面这个过程是一个大系统的一小部分，要求在最好十几秒内就要完成这个过程， 并且大概只有1M的内存空间可以使用。</p>

<p>首先， 1千万个数字是放不进1M的， 1M只能放一百万个数字， 所以不能使用普通的内存排序。 可以采用文件归并排序。 但速度肯定达不到要求。</p>

<p>但是1千万个(bit)， 差不多是1M多一点， 如果用一个位表示一个数字， 那就有望在1M多一点的内在中保存1千万个数字。</p>

<p>该问题最后的解决方案大概是这样的（原文是伪代码，这里使用java实现，并且可以运行，因为可以运行的代码让程序员更兴奋）</p>

<p>等等，我们先产生这样的文件，否则又对什么进行操作呢？</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2010/01/03/quicksort.html">《算法导论》读书笔记4 (快速排序)</a>
        </h3>
        <span class="post-meta">Jan 3, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>Java代码 
敢取这个名字，应该很快！  </p>

<p>直切主题， 它的算法像这样：  </p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2010/01/02/heapsort.html">《算法导论》读书笔记3(堆排序)</a>
        </h3>
        <span class="post-meta">Jan 2, 2010 00:01</span>
        <hr id="line">
		<div class="content">
		<p>第二部分，排序和顺序统计学</p>

<p>在笔记一中， 我们实现了两个排序算法：插入排序和归并排序。</p>

<p>第六章是堆排序。现在就是第六章。</p>

<p>这里的堆，不是堆栈的堆，那个一般是指一块动态分配的内存：）</p>

<p>这里的堆是一个数据结构，它是一个二叉树（二叉堆），可以存在数组中</p>

<p>像这样：</p>

<p><code>
           16  
         /     \  
      14        10  
    /    \     /    \  
  8       7   9      3      -&gt;   16 14 10 8 7 9 3 2 4 1  
 / \     /  
2   4   1  
</code></p>

<p>根要比左右两个结点要大，并且左右子树也是一个堆–&gt; 是一个递归定义</p>

<p>可以用这样的代码来表示上述定义</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2009/12/26/complexity.html">《算法导论》读书笔记2(复杂度的表示，递归，以及概率</a>
        </h3>
        <span class="post-meta">Dec 26, 2009 00:12</span>
        <hr id="line">
		<div class="content">
		<p>这两天终于把第一部分（基础知识）给过了一遍，算是热身啦。</p>

<h2 id="section">第3章：函数的增长</h2>

<p>这一章主要讲了复杂度的表示方法：大O小O等。以及各类基本常用函数，像对数，指数。</p>

<p>当然还有阶乘，取整，取模函数。</p>

<p>还有学了计算机后才接触到的函数迭代以及 到处可见的斐波那切数</p>

<p>基本上算是把初等数学给温故了一遍。</p>

<h2 id="section-1">第四章：递归式</h2>

<p>在“笔记1”中， 我们实现了归并排序， 我们为了求比较次数，把算法简化成这样：</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/algorithms/2009/12/10/begin.html">《算法导论》读书笔记1(算法入门)</a>
        </h3>
        <span class="post-meta">Dec 10, 2009 00:12</span>
        <hr id="line">
		<div class="content">
		<p>学习开发至今，《算法导论》这部经典却一直没有看过。虽然大多常见算法都在其他书籍（如数据结构）学过，但还是想重新把它看一遍。今天终于收到amazon寄来的厚厚的一本，开始看。。。</p>

<p>书共分八部分，其中最后一部分附录，是数学基础。我是先看这一部分的，浏览了一遍。</p>

<p>基本上内容有：</p>

<p>1。高数中的级数，常见的数列（级数）的求和。 — 基本上用数学归级法很容易证明
2。离散数学中的：集合，关系以及函数，图，树，二叉树概念。
3。概率论的基础知识</p>

<p>接着就是第一部分《基础知识》</p>

<p>第一章是《算法在计算机中的作用》</p>

<p>就我自己认为：算法很重要，他对于计算机来说，可能是速度，但对于我们程序员来说更是“思想”，是“解决之道”。学习和掌握算法以及中间的原理，有助于我们写出更好的程序。</p>

<p>第二章是《算法入门》</p>

<p>本章介绍了两个排序算法，并用伪代码进行描述。进而分析他们的正确性，以及算法复杂度。</p>

<p>主要是让读者熟悉书中的伪代码描述形式，以及分析算法的方法。为其他章节做好准备。</p>

<p>比起看枯燥的分析，我更喜欢写实际的可运行的代码。当我用ruby写完插入排序，发现排10万个数据很累，所以又用java实现。</p>

<p>首先，我写了“插入排序”</p>

<p><code>java
public void insertionSort(int[] ary) {  
    for (int i = 1; i &lt; ary.length; i++) {  
        int t = ary[i];  
        int j = i - 1;  
        while (j &gt;= 0 &amp;&amp; ary[j] &gt; t) {  
            ary[j + 1] = ary[j];  
            j--;  
        }  
        ary[j + 1] = t;  
    }  
}  
</code></p>

<p>我需要测试它是否正确， 但是首先得有一个随机数组，于是我又写了一个方法，用于产生随机数组</p>

<p><code>java
public int[] genRandAry(int n) {  
    int[] ary = new int[n];  
    Random rand = new Random();  
    for (int i = 0; i &lt; ary.length; i++) {  
        ary[i] = rand.nextInt();  
    }  
    return ary;  
}  
</code></p>

<p>现在有随机数组，可以进行排序了。但是在排序后，还需要测试一下，是否正确， 自然地我又写了一个方法，用于测试数组是否正确排序。</p>

<p><code>java
public boolean isSorted(int[] ary) {  
    for (int i = 0; i &lt; ary.length - 1; i++) {  
        if (ary[i] &gt; ary[i + 1]) {  
            return false;  
        }  
    }  
    return true;  
}  
</code></p>

<p>万事俱备，测试它吧，我写了一个测试方法，使用junit</p>

<p><code>java
@Test  
public void testInsertionSort() {  
    for (int i = 0; i &lt; 1000; ++i) {  
        int[] ary = genRandAry(i);  
        insertionSort(ary);  
        assertTrue(isSorted(ary));  
    }  
}  
</code></p>

<p>意料之中，看到绿条。</p>

<p>很久前我就知道插入排序比较差，时间复杂度为平方数量级的，可是还真的没比较过呢， 现在刚好可以试一下。</p>

<p>```java 
public void sortManyManyData() {<br />
    int[] nums = { 1000, 2000, 5000, 8000,<br />
            10000, 20000, 50000, 80000,<br />
            100000, 200000, 500000, 800000,<br />
            1000000, 2000000, 5000000, 8000000,<br />
            10000000};  </p>

<pre><code>long[] sortTimes = new long[nums.length];  
  
for (int i = 0; i &lt; nums.length; ++i) {  
    int k = 10;  
    long time = 0;  
    for (int j = 0; j &lt; k; ++j) {  
        int[] ary = genRandAry(nums[i]);  
        long begin = Calendar.getInstance().getTimeInMillis();  
        insertionSort(ary);  
        //mergeSort(ary);  
        //Arrays.sort(ary);  
        long end = Calendar.getInstance().getTimeInMillis();  
        time += (end - begin);  
    }  
    sortTimes[i] = time / k;  
}  
  
System.out.println("排序数量\t\t排序时间(ms)");  
for (int i = 0; i &lt; nums.length; ++i) {  
    System.out.println("" + nums[i] + "\t\t" + sortTimes[i]);  
}   }   ```
</code></pre>

<p>我运行了以上代码，结果做了一个晚餐，他还没运行好，被我强制中断，修改了nums, 让它小一点。 结果排序10万整数时间大约为9秒（更大的我没耐心等了，呼呼）。</p>

<p>然后我用Array.sort也进行排序， 结果排序一千万整数，竟然不到3秒。</p>

<p>先不忙分析复杂度， 因为书中还介绍了另一个算法“归并排序”。我先实现它。 算法也很简单：</p>

<p>```java
public void mergeSort(int[] ary) {<br />
    if (ary.length == 0 || ary.length == 1) {<br />
        return;<br />
    }  </p>

<pre><code>int mid = ary.length / 2;  
int[] a = Arrays.copyOfRange(ary, 0, mid);  
int[] b = Arrays.copyOfRange(ary, mid, ary.length);  
  
mergeSort(a);  
mergeSort(b);  
  
merge(a, b, ary);   }   ```
</code></pre>

<p>先分割原数组成两个数组，再分别归并排序，最后合并成一个大数组：），当然还有一个merge</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/window/2009/11/28/wxruby-record.html">wxRuby使用记录</a>
        </h3>
        <span class="post-meta">Nov 28, 2009 00:11</span>
        <hr id="line">
		<div class="content">
		<h2 id="ruby-exerb">1. 使用ruby正常运行， 但exerb导出时，运行失败：</h2>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/c&c++/2008/09/02/declare.html">C/C++中复杂的申明</a>
        </h3>
        <span class="post-meta">Sep 2, 2008 00:09</span>
        <hr id="line">
		<div class="content">
		<p>昨天一朋友(估计要考二级了)问我:  int * a[];  这玩意儿到底是指针还是数组.  我告诉他, 这是数组, 里 </p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/php/2007/08/26/cakephp-validation.html">CakePHP Validation</a>
        </h3>
        <span class="post-meta">Aug 26, 2007 00:08</span>
        <hr id="line">
		<div class="content">
		<p>和Rails 一样,  CakePHP的Model也有Validation</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/c&c++/2007/08/14/two-question.html">两道笔试题</a>
        </h3>
        <span class="post-meta">Aug 14, 2007 00:08</span>
        <hr id="line">
		<div class="content">
		<p>昨天一朋友找工作, 碰到两道算法笔试题, 都是当于链表操作的.</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/window/2007/07/11/wxwidgets.html">wxWidgets是个好东西</a>
        </h3>
        <span class="post-meta">Jul 11, 2007 00:07</span>
        <hr id="line">
		<div class="content">
		<p>最近一个工具，由于是工具，本来是用SDK编写的，只是功能完成后，对界面不满意，但是苦于手头可用的东东有限。。。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2007/02/28/combviewer.html">照着葫芦画，CComboViewer</a>
        </h3>
        <span class="post-meta">Feb 28, 2007 00:02</span>
        <hr id="line">
		<div class="content">
		<p>我的代码中有一个 ComboViewer, 不过在Window 2000，Form 中，样式有点难看，有讨厌的三维边框。
而 FormToolkit 只对 CCombo 控件 进行细边框绘制（FormToolkit.paintBorderFor(…)）
所以我依照 ComboViewer “抄” 了一个 CComboViewer。 </p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2007/02/27/form-border.html">为Form中的控件添加漂亮的边框</a>
        </h3>
        <span class="post-meta">Feb 27, 2007 00:02</span>
        <hr id="line">
		<div class="content">
		<p>今天把机子显示模式调到 “Windows经典”，发现 Form 中的 Text, Table 等控件都没有了边框，变成了空白。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2006/12/17/class-not-found-and-buddy-classloading.html">ClassNotFoundException and Buddy Classloading</a>
        </h3>
        <span class="post-meta">Dec 17, 2006 00:12</span>
        <hr id="line">
		<div class="content">
		<p>以下情景：</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2006/12/16/table-view-dbclick-edit.html">TableViewer, TreeViewer双击编辑</a>
        </h3>
        <span class="post-meta">Dec 16, 2006 00:12</span>
        <hr id="line">
		<div class="content">
		<p>在TreeViewer或TableViewer中，可用CellEditor结合CellModifier可以很实现表格的编辑功能，但是默认的是单击，就会打开编辑区域。有时候我们会需要双击进行（或者其他），于是我写了一个<code>DoubleCellModifier</code>，只要让你的<code>CellModifier</code>继承它，就可以很方便实现双击编辑。</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2006/12/16/align-center-jface-dialog-button.html">让JFace Dialog底部的按扭居中</a>
        </h3>
        <span class="post-meta">Dec 16, 2006 00:12</span>
        <hr id="line">
		<div class="content">
		<p>查Eclipse源码可以看到： </p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2006/12/16/about-workbench-label-provider-and-base=workbench-content-povider.html">代码摘录：关于WorkbenchLabelProvider以及BaseWorkbenchContentProvider</a>
        </h3>
        <span class="post-meta">Dec 16, 2006 00:12</span>
        <hr id="line">
		<div class="content">
		<p>```java</p>


        </div>
		<br>
      </li>
    
      <li>
        <br>
        <h3>
          <a class="post-link" href="/eclipse/2006/08/17/RCP.html">RCP开发日积月累</a>
        </h3>
        <span class="post-meta">Aug 17, 2006 00:08</span>
        <hr id="line">
		<div class="content">
		<h4 id="swt-layout-2006-8-17">1. 关于SWT Layout <em>(2006-8-17)</em></h4>


        </div>
		<br>
      </li>
    
  </ul>
</div>

      </div>
    </div>
    
    <footer class="footer">
  <div id="gotop">^</div>
  <br>
	@2015 Pithy Theme by Pawpaw.
</footer>

    
  </body>

</html>
