---
layout: post
title: 读 a week with elixir
categories: elixir
---

erlang作者对elixir的评价

[a week with elixir](http://joearms.github.io/2013/05/31/a-week-with-elixir.html)。

提出了一些值得改进的建议。

1. version

需要给源码添加version标识。

自己也没写出什么长期维护的东西，所以对这个不是很有感觉。


2. 在shell中应该可以使用def定义function

```elixir
iex> double = fn(x) -> 2 * x end;
iex> def double(x) do 2*x end;
```

3. 去掉调用匿名函数的点

```elixir
iex> f = fn(x) -> 2 * x end
#Function
iex> f.(10)
20
```

我也觉得确实挺讨厌的。


4. pipe operator

确实是好东西！


5. sigils

  Sigils are great - love 'em. We should add these to Erlang.


6. docstrings

  Docstrings are great love 'em.

但建议把docstrings放到函数体内。

```elixir
@doc """
...
"""

def foo do
   ...
end
```

变成

```elixir
 def foo do
   @doc """
   ...
   """
 end
```

不过function有好几个子句，放第一个也不是很合适，所以我觉得还是放外面更合适？

module docstring就是放在模块内部的。

```elixir
defmodule Math do
  @moduledoc """

  """
end
```


7. macro

  Love 'em.

  This is one of those things that is right

8. 多余的标点符号


```elixir
iex> lc x inlist [1,2,3], do: 2*x
[2,4,6]
```

认为do前面的 是多除的，希望以写成下面这样

```elixir
iex> lc x inlist [1,2,3] do: 2*x
** (SyntaxError) iex:3: syntax error before: do
```

9. 奇怪的空白

```elixir
iex> lc x inlist [1,2,3], do : 2*x
** (SyntaxError) iex:2: invalid token: : 2*x
```

  To me white-space is white-space

  But I can't do this in Elixir - I don't like this.


10. closure

  **Closures done right - Hip hip hooray**

  fn's have the nice property of **capturing the present** value of any variables that are in their scope (ie we can create immutable closures) this is incredibly useful.

  **This is something that JavaScript gets very wrong.**


目前的elixir不支持在模块中定义closure

  **This is completely fixable I did this in an experiment in erlang2.**


此外最后一段有点感动：


    It's a new language, but books are being written as the language is being developed.  
    The first Erlang book came 7 years after Erlang was invented, and the first popular book 14 years later.   
    21 years is too long to wait for a decent book.

谦虚了一把

  This was written in haste and while excited. So probably has a few typos. Feel free to push corrections.
